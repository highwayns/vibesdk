app:
  description: æ¯”è¾ƒä¸¤ç»„å›¾ç‰‡ä¸­çº¢è‰²æ ‡æ³¨åŒºåŸŸçš„å†…å®¹ï¼Œåˆ¤æ–­æ˜¯å¦ä¸€è‡´
  icon: ğŸ”
  icon_background: '#FF6B6B'
  mode: workflow
  name: PDFçº¢æ¡†åŒºåŸŸæ¯”è¾ƒå·¥ä½œæµ
  use_icon_as_answer_icon: true
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/openai:0.2.6@e2665624a156f52160927bceac9e169bd7e5ae6b936ae82575e14c90af390e6e
kind: app
version: 0.1.5
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .png
      - .jpg
      - .jpeg
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: true
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 20
    opening_statement: ''
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        sourceType: llm
        targetType: code
      id: compare-to-format
      selected: false
      source: compare_regions
      sourceHandle: source
      target: format_result
      targetHandle: target
      type: custom
    - data:
        isInIteration: false
        sourceType: code
        targetType: end
      id: format-to-end
      selected: false
      source: format_result
      sourceHandle: source
      target: end
      targetHandle: target
      type: custom
    - data:
        isInLoop: false
        sourceType: start
        targetType: llm
      id: start-source-compare_regions-target
      source: start
      sourceHandle: source
      target: compare_regions
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: æ¥æ”¶ä¸¤ç»„å¾…æ¯”è¾ƒçš„å›¾ç‰‡
        selected: false
        title: å¼€å§‹
        type: start
        variables:
        - allowed_file_extensions: []
          allowed_file_types:
          - image
          allowed_file_upload_methods:
          - local_file
          - remote_url
          label: å›¾
          max_length: 10
          options: []
          required: true
          type: file
          variable: images_group
        - default: è¯­ä¹‰ç›¸ä¼¼
          label: æ¯”è¾ƒæ¨¡å¼
          options:
          - ä¸¥æ ¼åŒ¹é…
          - è¯­ä¹‰ç›¸ä¼¼
          - ä»…æ£€æŸ¥å…³é”®ä¿¡æ¯
          required: false
          type: select
          variable: compare_mode
        - label: item_index
          max_length: 48
          options: []
          required: true
          type: number
          variable: item_index
      height: 170
      id: start
      position:
        x: 302.5
        y: 280
      positionAbsolute:
        x: 302.5
        y: 280
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ä½¿ç”¨è§†è§‰æ¨¡å‹æ¯”è¾ƒä¸¤ç»„å›¾ç‰‡ä¸­çº¢æ¡†åŒºåŸŸçš„å†…å®¹
        model:
          completion_params:
            max_tokens: 4096
            response_format: text
            temperature: 0.1
          mode: chat
          name: gpt-4-turbo
          provider: langgenius/openai/openai
        prompt_template:
        - id: system-prompt
          role: system
          text: 'Â  Â  Â  Â  Â  Â  ã‚ãªãŸã¯ãƒ—ãƒ­ã®æ–‡æ›¸æ¯”è¼ƒã‚¢ãƒŠãƒªã‚¹ãƒˆã§ã™ã€‚1æšã®æ¯”è¼ƒç”»åƒãŒä¸ãˆã‚‰ã‚Œã¾ã™ã€‚å·¦å´ã¯ã€Œå…ƒã®ç‰ˆã€ã€å³å´ã¯ã€Œæ¯”è¼ƒç‰ˆã€ã§ã™ã€‚



            Â  Â  Â  Â  Â  Â  ## ã‚ãªãŸã®ã‚¿ã‚¹ã‚¯

            Â  Â  Â  Â  Â  Â  1. å·¦å³ã®å†…å®¹ã‚’æ³¨æ„æ·±ãè¦³å¯Ÿã™ã‚‹

            Â  Â  Â  Â  Â  Â  2. ä¸€è‡´ã—ã¦ã„ã‚‹ã‹åˆ¤å®šã™ã‚‹

            Â  Â  Â  Â  Â  Â  3. å·®ç•°ãŒã‚ã‚Œã°ã€å·®åˆ†ç‚¹ã‚’å…·ä½“çš„ã«èª¬æ˜ã™ã‚‹



            Â  Â  Â  Â  Â  Â  ## æ¯”è¼ƒãƒ¢ãƒ¼ãƒ‰

            Â  Â  Â  Â  Â  Â  - **å³å¯†ä¸€è‡´**: æ–‡å­—ãƒ»æ•°å­—ãƒ»ä½“è£ã¾ã§å®Œå…¨ã«ä¸€è‡´ã—ã¦ã„ã‚‹ã“ã¨

            Â  Â  Â  Â  Â  Â  - **æ„å‘³çš„é¡ä¼¼**: è¡¨ç¾ãŒç•°ãªã£ã¦ã‚‚æ„å‘³ãŒåŒã˜ãªã‚‰ä¸€è‡´ã¨ã¿ãªã™

            Â  Â  Â  Â  Â  Â  - **é‡è¦æƒ…å ±ã®ã¿ç¢ºèª**: é‡è¦ãƒ‡ãƒ¼ã‚¿ï¼ˆæ•°å€¤ãƒ»æ—¥ä»˜ãƒ»é‡‘é¡ãªã©ï¼‰ã ã‘ã‚’è¦‹ã‚‹



            Â  Â  Â  Â  Â  Â  ## å‡ºåŠ›å½¢å¼ï¼ˆå¿…ãš JSON ã§å³å®ˆï¼‰

            Â  Â  Â  Â  Â  Â  ```json

            Â  Â  Â  Â  Â  Â  {

            Â  Â  Â  Â  Â  Â  Â  "is_match": trueã¾ãŸã¯false,

            Â  Â  Â  Â  Â  Â  Â  "match_type": "å®Œå…¨ä¸€è‡´" ã¾ãŸã¯ "æ„å‘³ä¸€è‡´" ã¾ãŸã¯ "éƒ¨åˆ†ä¸€è‡´" ã¾ãŸã¯ "ä¸ä¸€è‡´",

            Â  Â  Â  Â  Â  Â  Â  "confidence": 0.0ã‹ã‚‰1.0ã®æ•°å€¤,

            Â  Â  Â  Â  Â  Â  Â  "left_content": "å·¦å´ï¼ˆå…ƒã®ç‰ˆï¼‰ã®ä¸»è¦å†…å®¹ã‚µãƒãƒª",

            Â  Â  Â  Â  Â  Â  Â  "right_content": "å³å´ï¼ˆæ¯”è¼ƒç‰ˆï¼‰ã®ä¸»è¦å†…å®¹ã‚µãƒãƒª",

            Â  Â  Â  Â  Â  Â  Â  "differences": "å·®ç•°èª¬æ˜ï¼ˆä¸€è‡´ãªã‚‰ç©ºæ–‡å­—ï¼‰",

            Â  Â  Â  Â  Â  Â  Â  "details": "è©³ç´°ãªåˆ†æ"

            Â  Â  Â  Â  Â  Â  }

            Â  Â  Â  Â  Â  Â  ```



            Â  Â  Â  Â  Â  Â  é‡è¦ï¼šJSON ã®ã¿ã‚’å‡ºåŠ›ã—ã€ä»–ã®æ–‡ç« ã¯å‡ºåŠ›ã—ãªã„ã€‚'
        - id: user-prompt
          role: user
          text: 'Â  Â  Â  Â  Â  Â  ã“ã®æ¯”è¼ƒç”»åƒã®å·¦å³ã®å†…å®¹ã‚’æ¯”è¼ƒã—ã¦ãã ã•ã„ã€‚



            Â  Â  Â  Â  Â  Â  æ¯”è¼ƒãƒ¢ãƒ¼ãƒ‰ï¼š{{#start.compare_mode#}}



            Â  Â  Â  Â  Â  Â  ã‚ˆãç¢ºèªã—ãŸã†ãˆã§ã€JSON å½¢å¼ã§æ¯”è¼ƒçµæœã‚’å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚'
        selected: false
        title: è§†è§‰å¯¹æ¯”åˆ†æ
        type: llm
        variables: []
        vision:
          configs:
            detail: high
            variable_selector:
            - start
            - images_group
          enabled: true
      height: 134
      id: compare_regions
      position:
        x: 641.25
        y: 280
      positionAbsolute:
        x: 641.25
        y: 280
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import json\nimport re\n\ndef main(llm_output: str, item_index: int)\
          \ -> dict:\n    \"\"\"LLM ã®æ¯”è¼ƒçµæœã‚’è§£æ\"\"\"\n    result = {\n        \"index\"\
          : item_index,\n        \"is_match\": False,\n        \"match_type\": \"\
          è§£æå¤±æ•—\",\n        \"confidence\": 0.0,\n        \"left_content\": \"\",\n\
          \        \"right_content\": \"\",\n        \"differences\": \"\",\n    \
          \    \"details\": \"\",\n        \"parse_success\": False\n    }\n\n   \
          \ try:\n        # ç›´æ¥è§£æã‚’è©¦ã¿ã‚‹\n        data = json.loads(llm_output)\n    \
          \    result.update(data)\n        result[\"parse_success\"] = True\n   \
          \     result[\"index\"] = item_index\n    except:\n        # JSON ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®æŠ½å‡ºã‚’è©¦ã¿ã‚‹\n\
          \        match = re.search(r'```(?:json)?\\s*([\\s\\S]*?)\\s*```', llm_output)\n\
          \        if match:\n            try:\n                data = json.loads(match.group(1))\n\
          \                result.update(data)\n                result[\"parse_success\"\
          ] = True\n                result[\"index\"] = item_index\n            except:\n\
          \                result[\"details\"] = llm_output\n        else:\n     \
          \       # JSON ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æŠ½å‡ºã‚’è©¦ã¿ã‚‹\n            match = re.search(r'\\{[\\s\\\
          S]*\\}', llm_output)\n            if match:\n                try:\n    \
          \                data = json.loads(match.group(0))\n                   \
          \ result.update(data)\n                    result[\"parse_success\"] = True\n\
          \                    result[\"index\"] = item_index\n                except:\n\
          \                    result[\"details\"] = llm_output\n            else:\n\
          \                result[\"details\"] = llm_output\n\n    return {\"result\"\
          : result}\n"
        code_language: python3
        desc: å°†æ¯”è¾ƒç»“æœæ ¼å¼åŒ–ä¸ºæ˜“è¯»çš„æŠ¥å‘Š
        outputs:
          result:
            children: null
            type: object
        selected: false
        title: æ ¼å¼åŒ–æŠ¥å‘Š
        type: code
        variables:
        - value_selector:
          - compare_regions
          - text
          variable: llm_output
        - value_selector:
          - start
          - item_index
          variable: item_index
      height: 82
      id: format_result
      position:
        x: 958.75
        y: 280
      positionAbsolute:
        x: 958.75
        y: 280
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: è¾“å‡ºæ¯”è¾ƒç»“æœæŠ¥å‘Š
        outputs:
        - value_selector:
          - format_result
          - result
          variable: result
        selected: false
        title: ç»“æŸ
        type: end
      height: 118
      id: end
      position:
        x: 1278.75
        y: 280
      positionAbsolute:
        x: 1278.75
        y: 280
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    viewport:
      x: 105.36161297896922
      y: 310.98482206382084
      zoom: 0.3482202253184498
